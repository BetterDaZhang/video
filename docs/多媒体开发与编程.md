# 多媒体开发与编程

主编 于永彦 关明山等

北京大学出版社 



## 第一章 绪论

### 1.1 媒体概述

计算机行业的媒体有两层含义：一是指存储信息的载体，如磁盘、光盘、闪盘等；二是指传播信息的载体，如文字、声音、图形/图像、视频、动画等。

媒体的5个层面

| 名称     | 作用                                                         |
| -------- | ------------------------------------------------------------ |
| 感知媒体 | 由人类感官直接感知的一类媒体                                 |
| 表达媒体 | 为了能更有效地加工、处理和传输感觉媒体而人为构造出来的一种媒体 |
| 显示媒体 | 进行信息输入和输出的媒体                                     |
| 存储媒体 | 进行信息存储的媒体                                           |
| 传输媒体 | 用于承载信息、传输信息的载体                                 |

其中，表达媒体又可以分为三种类型：视觉类媒体（位图图像、矢量图形、图表、符号、视频、动画）、听觉类媒体（音响、语音、音乐）、触觉类媒体（点、未知追踪；力反馈和运动反馈）。视觉和听觉类媒体是信息传播的内容，触觉类媒体是实现人机交互的手段。

#### 常见媒体

- 文本

  是最基本、最成熟的一种媒体形式，由字符型数据和汉字组成，在计算机中用二进制编码的形式表示。

  常见的编码是美国标准信息交换码（American Standard Code for Information Interchange，ASCII），它主要针对西文字符。

  我国的汉字字符也有对应的二进制编码，称为汉字国标码。我国汉字标准GB2312中有6763个常用汉字。

- 音频

  音频（Audio）是个专业术语，泛指人类能够听到的所有声音。

  人的耳朵对于声音的感知频率范围约为20Hz～20kHz。

  音调、音强和音色称为声音的三要素。

  其中，音调与声音的频率相关，频率高则音调高，频率低则音调低。

  音强取决于声波的幅度，振幅高时音强强，振幅低时音强弱。

  音色则由叠加在声音基波上的谐波所决定，一个声波上的谐波越丰富，音色越好。

  多媒体技术设计声音处理的多个方面，如声音采集、编码/解码、合成/分解、语音识别等，其中最关键的是数字音频概念，数字音频是指一个用来表示声音强弱的数据序列，由模拟声音经抽样、量化和编码后得到。常见的数字CD等中存储的都是数字音频数据。

- 图形与图像

  图形：指由点、线、面、体等几何要素明暗、灰度、色彩等非几何要素构成的，从现实世界中抽象出来的带有灰度、色彩和形状的图或形。

  图像：指当光辐射能量

  图像是由一些排列的像素组成的，故也称为位图。图像一般数据量较大。

  图形最大的特点是容易进行移动、压缩、旋转、扭曲等变换，主要用于表示线框图的图画、工程制图、美术字等。

  由于图形只保存算法和特征点，所以相对于图像的大量数据来说，图形占用的存储空间较小。但由于每次屏幕显示时都需要重新计算，故**显示速度没有图像快**。

  另外，在打印输出和放大时，**图形的质量较高而图像常会发生失真**。

  svg属于图形，img属于图像。

- 视频

  通常所说的视频，一般泛指将一系列静态影像以电信号方式加以捕捉、记录、处理、储存、传送与重现的相关技术。

  视频的生成原理十分简单直观，例如，将若干张有联系的图像按一定的频率连续播放，当连续的图像变化超过24帧/秒以上时，根据视觉的暂留原理，人眼无法辨别单幅的静态画面，看上去是平滑连续的视觉效果，这样就形成了视频。

- 动画

  简单地说，所谓动画（Animation）就是运行的图画。

### 1.2 多媒体与多媒体技术

广义上来讲，所谓多媒体（Multimedia），就是指多种媒体的有机融合，即能够同时获取、处理、编辑、存储和回放两种或两种以上媒体的技术。它并不仅是指多种媒体本身，更主要的是指处理和应用多媒体的一整套技术。

- 多媒体概念

- 多媒体技术

- 多媒体技术的发展

  多媒体技术的反战是社会需求不断增加的结果，是社会分工不断细化的结果，是计算机技术不断成熟和扩展的结果。

  多媒体技术的起源得力于显卡和声卡的技术进步。显卡的诞生标志着计算机初具图像处理的能力；声卡的出现标志着计算机进一步具备了音频处理能力，直接推动计算机信息处理技术进入崭新的多媒体阶段。

  1984，美国RCA公司推出第一台雏形多媒体计算机。美国Apple公司开创了用计算机进行图像处理的先河，首次使用位图概念对图像进行描述，实现了对图像进行简单的处理、存储和传送等功能。

  ······

### 1.3 多媒体技术研究内容

多媒体技术从媒体的处理流程上看，可分为信息获取、处理与控制、数据传输3个方面，几乎覆盖了计算机技术的各个领域，包含信息数字化、压缩与编码、存储、传输、接口与通信等。

- 媒体信息的获取与展示

- 数据压缩、编码与存储

  衡量多媒体技术性能的基本指标是其对数据存储设备的要求和信息处理的效率。

  存储容量、存取速度和实时性。

  在采用新技术增加CPU处理速度、存储容量和提高通信带宽的同时，还需要研究高效的数据压缩和编码技术，以达到高效快速的存储及传输。

- 多媒体数据库技术

- 多媒体信息数据量巨大，媒体种类多，每种媒体之间的差别也很大，这些都给管理带来困难，因此，传统的数据库已不能适应多媒体数据的管理。多媒体数据库是一个由若干多媒体对象所构成的集合，这些数据对象按一定的方式被组织在一起，可为其他的应用所共享。多媒体数据库管理系统则负责完成对多媒体数据库的各种操作和管理功能，包括对数据库的定义、操纵和控制等这样一些传统数据库功能。

  多媒体内容检索···

- 多媒体通信技术

  多媒体系统一般都是基于网络分布的计算机应用系统。



## 第二章 Windows图形基础

多媒体的基本元素就是文本、声音、图形/图像和视频等。其实，从本质上来说，在Windows环境下，屏幕上显示的任何东西，包括文字信息，都可以看成是图形/图像，所以有时也把Windows称为图形操作系统。

### 2.1 图形概念

在计算机中，一般用矢量图来表达图形，而用位图描述图像。

- 矢量图

  所谓矢量图，是指用一系列计算机指令来表示一幅图，如画点、画线、画圆等。这种方法实际上是以数学方法来描述一幅图，然后变成许许多多的数学表达式，再经过编程后，用语言来表达。

  | 格式 | 特点                                                         |
  | ---- | ------------------------------------------------------------ |
  | SVG  | 可缩放的矢量图格式，可任意放大图形，边缘清晰，文字在图像中保留可编辑和可搜寻的状态；没有字体限制，生成的文件很小，下载很快，适合用于设计高分辨率的Web图形界面。 |
  | EPS  | 跨平台的标准格式，主要用于矢量图像和光栅图像的存储。常用于印刷和打印。 |
  | SWF  | Flash专用格式，支持矢量和点阵图形，广泛用于网页设计、动画制作等领域 |
  | DOC  | 通用格式化文本格式                                           |

  矢量图有许多优点。例如，当需要管理每一小块图像时，矢量图法非常有效；目标图像的移动、缩放、旋转、复制、属性的改变也很容易做到。可以把相同的或类似的图当作图的构造块，并把它们存到图库中，这样不仅可以加速画的生成，而且可以见效矢量图文件的大小。

  然而，当图变得复杂时，计算机就要花费很长的时间去执行绘图命令。此外，对于一幅复杂的彩色照片，很难用数学来描述，因而不能用矢量图表示，要采用位图法表示。

- 位图

  它把一幅彩色图分成许许多多的像素，组成一个点阵矩阵，每个像素用若干个二进制位来指示该像素的颜色、亮度和属性。

  PSD，BMP，JPEG

  位图又可以分为与设备有关的位图DDB和与设备无关的位图DIB。

  DDB     要么在视频内存中，要么在系统内存中。

  DIB       可用来永久性保存图像

  位图文件占据的存储空间比较大。影响位图文件大小的因素主要有两个：图像分辨率和像素深度。分辨率越高，表示组成一幅图的像素越多，图像文件就越大；像素深度越深，表明表达单个像素颜色和亮度的位数越多。而矢量图文件的大小则主要取决于图的复杂程度。

### 2.2 图形设备接口

任何图形的显示输出都离不开GDI。使用GDI绘制的图形具有设备无关性，操作系统屏蔽了硬件设备的差异，用户编程时无需考虑特殊的硬件设置，因而在屏幕窗口内绘图与在打印机上绘图是相似的。

不过，GDI并不直接完成图形绘制工作，它提供一种独立于设备的仲裁机制，接收应用程序通过GDI函数发来的请求，经过翻译之后将这些请求传送给相应的设备驱动程序，再由设备驱动程序驱动相应的硬件设备。



## 第三章 基于OpenGL的图形绘制

在计算机发展初期，人们就开始从事计算机图形的开发，但直到20世纪80年代末，3D图形才开始发展，涌现出各种3D图形工具包，比较典型的是硅图（Silicon Graphics，SGI）公司开发的IRIS图形库。IRIS GL是一个工业标准的3D图形软件接口，功能强大，但可移植性不好。为此，SGI公司又在此基础上开发了开放图形库（Open GL）。由于OpenGL独立于具体的硬件环境和操作系统环境，任何厂商均可自由使用，这让它备受业界人士喜爱，因而被广泛应用于医疗、军事、工业制图、传媒业、教育、艺术造型等领域，俨然已成为高端图形处理领域的通用标准之一。

### 3.1 OpenGL概述

1992 OpenGL 1.0

1995 OpenGL 1.1

2009 OpenGL 3.2

- OpenGL功能

  OpenGL是一个开放的三维图形软件包，除了提供基本物体的绘制函数外，还可以实现平移、旋转、变比、镜像和投影等基本变换，以及设置颜色模式、光照材质、纹理映射、图像特效和双缓存动画等功能。

  OpenGL有以下5个基本功能。

  - 模型绘制

    OpenGL能够绘制点、线和多边形。

    应用这些基本图形，我们可以构造出几乎所有的三维模型。

    OpenGL通常用模型的多边形顶点来描述三维图形。

  - 模型渲染

    - 指定颜色模式

      RGBA模式，直接由RGB值来制定

      颜色表模式， 由颜色表中的一个颜色索引值来指定

    - 设置光照

      三维模型必须加上光照才能与客观物体更加相似。

      OpenGL提供了4种光：辐射光、环境光、镜面光和漫反射光，另外还可以指定模型表面的反射特性。

    - 添加纹理

      三维景物因缺少景物的具体细节而显得不够真实，为了更加逼真地表现三维景物，OpenGL提供了纹理映射功能。OpenGL提供一系列纹理映射函数，从而可以方便地把真实图像贴到景物的多边形上，可以绘制逼真的三维景观。

    - 增强图像效果

      OpenGL提供了一系列增强三维景观图像效果的函数，这些函数通过反走样、混合和雾化等增强图像效果，使线段更平滑，效果更接近于真实。

  - 模型观察

    **观察三维模型是通过一系列的坐标变换进行的**。

    模型的坐标变换使观察者能够在视点位置观察与视点相适应的三维模型景观。

  - 实时动画

    为了获得平滑的动画效果，OpenGL提供了**双缓存技术**，即**先在内存生成一幅图像，再把已经生成的图像从内存复制到屏幕上**。

  - 交互技术

- OpenGL特点

  - 卓越的跨平台性

  - 完善的可编程性

  - 独特的网络透明性

    它允许一个运行在工作站上的进程在本机或通过网络在远程工作站上显示图形。利用这种性质能够均衡各工作站的工作负荷，共同承担图形应用任务。

- OpenGL工作机理

  由于OpenGL独立于硬件，因此不提供与硬件相关的操作函数。

  用户必须从最基本的点、线、面等开始，逐步构造自己的3D模型。但OpenGL提供了针对3D物体的丰富的绘制方式，如网格线、消隐、阴影、纹理、大气环境及深度域等渲染功能。使用这些特殊处理方式，OpenGL能够模拟复杂的自然景观。

  - 绘图方式

    从本质上讲，OpenGL绘图方式是由一系列的状态决定的，如果设置了一种状态或模式而不改变它，OpenGL在绘图过程中将一直保持这种状态或模式。

  - 工作流程

  - 基本步骤

    - 建模
    - 设置视点
    - 设置环境
    - 显示

### 3.4 图形变换

- 相机模型



















